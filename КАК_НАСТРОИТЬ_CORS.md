# üîß –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –Ω–∞ Railway

## –ü—Ä–æ–±–ª–µ–º–∞
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Netlify –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±—ç–∫–µ–Ω–¥—É –Ω–∞ Railway –∏–∑-–∑–∞ CORS –æ—à–∏–±–∫–∏:
```
Origin https://sunny-froyo-f47377.netlify.app is not allowed by Access-Control-Allow-Origin
```

## –†–µ—à–µ–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Railway (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway –ø—Ä–æ–µ–∫—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://railway.app
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç `X-18`

2. **–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å `custom-backend` (—Ç–æ—Ç, –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Go –±—ç–∫–µ–Ω–¥)

3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Variables**
   - –ù–∞–∂–º–∏—Ç–µ **New Variable**
   - –í–≤–µ–¥–∏—Ç–µ:
     ```
     Name: CORS_ORIGIN
     Value: https://sunny-froyo-f47377.netlify.app
     ```
   - –ù–∞–∂–º–∏—Ç–µ **Add**

4. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞**
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å (1-2 –º–∏–Ω—É—Ç—ã)
   - –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω–µ—Ç "Active"

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://sunny-froyo-f47377.netlify.app
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R –∏–ª–∏ Cmd+R)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è/–≤–æ–π—Ç–∏

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Railway CLI

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Railway CLI:

```bash
# –ü—Ä–∏–≤—è–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
railway link

# –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
railway variables --set CORS_ORIGIN="https://sunny-froyo-f47377.netlify.app"

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è?

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `CORS_ORIGIN` —É–∫–∞–∑—ã–≤–∞–µ—Ç –±—ç–∫–µ–Ω–¥—É, –∫–∞–∫–æ–º—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã.

–í –∫–æ–¥–µ –±—ç–∫–µ–Ω–¥–∞ (`custom-backend/cmd/server/main.go`):
```go
corsOrigin := os.Getenv("CORS_ORIGIN")
if corsOrigin == "" {
    corsOrigin = "http://localhost:5173" // –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
}

r.Use(cors.New(cors.Config{
    AllowOrigins: []string{corsOrigin},
    // ...
}))
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS, –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã –±–æ–ª—å—à–µ –ù–ï –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:
```
‚ùå Origin https://sunny-froyo-f47377.netlify.app is not allowed by Access-Control-Allow-Origin
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ API –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ:
```
‚úÖ 200 OK - POST /auth/register
‚úÖ 200 OK - GET /timeline/explore
‚úÖ 200 OK - GET /notifications
```

## –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–∞**
   - Railway ‚Üí custom-backend ‚Üí Variables
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å: `CORS_ORIGIN = https://sunny-froyo-f47377.netlify.app`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è**
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ Deploy logs
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞**
   - Ctrl+Shift+R (Windows/Linux)
   - Cmd+Shift+R (Mac)

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—ç–∫–µ–Ω–¥ –Ω–∞–ø—Ä—è–º—É—é**
   ```bash
   curl -I https://x-18-production-38ec.up.railway.app/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200 OK

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ –≤ Railway:
- Railway ‚Üí custom-backend ‚Üí Logs
- –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å "CORS" –∏–ª–∏ "Origin"

---

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é!**

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ª–µ–Ω—Ç—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
