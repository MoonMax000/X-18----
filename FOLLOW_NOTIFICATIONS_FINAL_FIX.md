# –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö/–æ—Ç–ø–∏—Å–∫–∞—Ö –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, —Ö–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend
- ‚úÖ Frontend –∫–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∞–∫—Ç–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç SocialNotifications.tsx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –¥–∞–Ω–Ω—ã–µ
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ —Å backend

### –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
psql -U x18user -d x18db -c "SELECT id, type, from_user_id, read FROM notifications WHERE type='follow';"
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ù–ï–¢ –Ω–∏ –æ–¥–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–∏–ø–∞ "follow"!

### –≠—Ç–∞–ø 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ backend –∫–æ–¥–∞
–î–æ–±–∞–≤–∏–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤:
- `custom-backend/internal/api/users.go` - —Ñ—É–Ω–∫—Ü–∏—è FollowUser
- `custom-backend/internal/api/notifications.go` - —Ñ—É–Ω–∫—Ü–∏—è GetNotifications

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
–°–æ–∑–¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `test-follow-with-auth.sh` –∫–æ—Ç–æ—Ä—ã–π:
1. –°–æ–∑–¥–∞—ë—Ç –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –õ–æ–≥–∏–Ω–∏—Ç—Å—è –æ—Ç –∏—Ö –∏–º–µ–Ω–∏ (–ø–æ–ª—É—á–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã)
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –≠—Ç–∞–ø 5: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
**–õ–æ–≥–∏ –ø–æ–∫–∞–∑–∞–ª–∏**: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞ –ù–ï –ë–´–õ–û –ª–æ–≥–æ–≤ –æ—Ç FollowUser!

**–ü—Ä–∏—á–∏–Ω–∞**: –†–∞–±–æ—Ç–∞–ª **—Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å backend** –±–µ–∑ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π backend:
```
‚ùå Server failed to start: failed to listen: listen tcp4 0.0.0.0:8080: bind: address already in use
```

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –£–±–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
```bash
pkill -9 -f "custom-backend"
pkill -9 -f "go run.*server/main.go"
lsof -ti :8080 | xargs kill -9
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
```bash
cd custom-backend && go run cmd/server/main.go 2>&1 | tee ../custom-backend-live.log &
```

### –®–∞–≥ 3: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Ç–µ—Å—Ç
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–¥–æ–º:

```
‚úÖ [FollowUser] ‚úì Follow record created
‚úÖ [FollowUser] ‚úì Notification created successfully: ID=f6f81d44-1c46-41e1-952b-d5a5a8bf928c
‚úÖ [FollowUser] ‚úì Notification verified in DB
‚úÖ [GetNotifications] Found 1 notifications
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç API**:
```json
{
  "notifications": [
    {
      "id": "f6f81d44-1c46-41e1-952b-d5a5a8bf928c",
      "type": "follow",
      "actor": {
        "id": "8b198c1b-3e48-4250-9c90-eb1a843a88f2",
        "username": "testuser1_1761529609",
        "display_name": "testuser1_1761529609"
      },
      "is_read": false,
      "created_at": "2025-10-27T08:46:49.709896+07:00"
    }
  ],
  "total": 1,
  "unread_count": 1
}
```

## –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **Backend —Å–æ–∑–¥–∞—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ü—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –ë–î
2. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: GET /api/notifications –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. **–î–∞–Ω–Ω—ã–µ –∞–∫—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è**: FromUser –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Preload
4. **Frontend –≥–æ—Ç–æ–≤**: –ö–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∞–∫—Ç–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üìù –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:
- Backend JSON –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `actor` (–Ω–µ `from_user`)
- Frontend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `notifications` —Å –ø–æ–ª–µ–º `from_user_id`

### üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `custom-backend/internal/api/users.go` - FollowUser/UnfollowUser (–ª–æ–≥–∏ —É–¥–∞–ª–µ–Ω—ã)
2. `custom-backend/internal/api/notifications.go` - GetNotifications (–ª–æ–≥–∏ —É–¥–∞–ª–µ–Ω—ã)
3. `client/pages/SocialNotifications.tsx` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ from_user (—É–∂–µ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)
4. `client/services/api/custom-backend.ts` - —Ç–∏–ø—ã —Å from_user (—É–∂–µ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å backend –ø—Ä–∞–≤–∏–ª—å–Ω–æ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -9 -f "custom-backend"
lsof -ti :8080 | xargs kill -9 2>/dev/null

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
cd custom-backend && go run cmd/server/main.go 2>&1 | tee ../custom-backend.log &

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
./START_CUSTOM_BACKEND_STACK.sh
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
./test-follow-with-auth.sh
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ User 1 & User 2 —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Follow successful  
- ‚úÖ Notifications Response —Å–æ–¥–µ—Ä–∂–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ "follow"
- ‚úÖ Actor –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –†–∞–±–æ—Ç–∞–ª —Å—Ç–∞—Ä—ã–π backend –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend, —É–±–∏–≤ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö —Ç–µ–ø–µ—Ä—å **—Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é**!

---

*–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 27.10.2025*  
*–ó–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è: ~30 –º–∏–Ω—É—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –¥–µ–±–∞–≥–∞*  
*–°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–û ‚úÖ*
