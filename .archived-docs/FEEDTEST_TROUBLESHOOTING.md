# FeedTest Troubleshooting Guide

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

–ë—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:

### 1. **TypeError: statuses.map is not a function**

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Hook `useGTSTimeline` –≤–æ–∑–≤—Ä–∞—â–∞–ª –¥–∞–Ω–Ω—ã–µ, –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å `.map()` –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞.

**–†–µ—à–µ–Ω–∏–µ:**  
```typescript
// –ë—ã–ª–æ:
const posts = useMemo(() => statuses.map(gtsStatusToPost), [statuses]);

// –°—Ç–∞–ª–æ:
const posts = useMemo(
  () => Array.isArray(statuses) ? statuses.map(gtsStatusToPost) : [],
  [statuses]
);
```

### 2. **–ù–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ API**

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ö–æ–≥–¥–∞ GoToSocial API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–≤–∏—Å–∞–ª–∞.

**–†–µ—à–µ–Ω–∏–µ:**  
–î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –∫–Ω–æ–ø–∫–æ–π "Try Again":

```typescript
if (error) {
  return (
    <div>
      <h3>Failed to load feed</h3>
      <p>{error}</p>
      <p>Make sure GoToSocial is running at {API_URL}</p>
      <button onClick={() => refresh()}>Try Again</button>
    </div>
  );
}
```

### 3. **custom_metadata –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏**

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π GoToSocial –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `custom_metadata`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:**  
–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª—è:

```typescript
const statusData: any = {
  status: text,
  visibility: 'public',
};

// –î–æ–±–∞–≤–ª—è–µ–º custom_metadata —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
if (postCategory || postMarket || postSymbol || sentiment) {
  statusData.custom_metadata = { ... };
}

await createStatus(statusData);
```

---

## üîß –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. **GoToSocial –∑–∞–ø—É—â–µ–Ω?**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ GoToSocial —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:8080/api/v1/instance

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ—Ä–≤–µ—Ä–µ
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - GoToSocial –Ω–µ –∑–∞–ø—É—â–µ–Ω
```

**–ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω:**

```bash
# –û–ø—Ü–∏—è 1: Docker
docker run -p 8080:8080 superseriousbusiness/gotosocial:latest

# –û–ø—Ü–∏—è 2: –ë–∏–Ω–∞—Ä–Ω–∏–∫
./gotosocial server start
```

### 2. **VITE_API_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω?**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
cat .env
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```bash
VITE_API_URL=http://localhost:8080
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ:**

```bash
echo "VITE_API_URL=http://localhost:8080" > .env
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server:**

```bash
npm run dev
```

### 3. **CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ GoToSocial?**

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É CORS –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

**–î–æ–±–∞–≤—å—Ç–µ –≤ config.yaml GoToSocial:**

```yaml
# config.yaml
web-cors-allow-origins:
  - "http://localhost:5173"  # Vite dev server
  - "http://localhost:3000"  # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ GoToSocial:**

```bash
./gotosocial server start
```

### 4. **–ï—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏?**

ÔøΩÔøΩ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Local Storage ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `auth_token`

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üêõ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### "Failed to load feed: Network Error"

**–ü—Ä–∏—á–∏–Ω–∞:** GoToSocial –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ GoToSocial –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:8080/api/v1/instance`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VITE_API_URL` –≤ `.env`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server: `npm run dev`

### "Failed to load feed: 401 Unauthorized"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Ç–æ–∫–µ–Ω –∏—Å—Ç—ë–∫

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –≤ localStorage
3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OAuth2, –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω

### "Failed to create post: 422 Unprocessable Entity"

**–ü—Ä–∏—á–∏–Ω–∞:** GoToSocial –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç `custom_metadata` (–µ—Å–ª–∏ –Ω–µ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω)

**–†–µ—à–µ–Ω–∏–µ:**  
–ö–æ–¥ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω - `custom_metadata` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ. –ù–æ –µ—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—à–∏–±–∫–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GoToSocial
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –±–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–∞–≤—å—Ç–µ Market/Category –ø—É—Å—Ç—ã–º–∏)
3. –î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ GoToSocial –ø–æ –≥–∞–π–¥—É `GOTOSOCIAL_SIMPLE_METADATA_GUIDE.md`

### "custom_metadata not found in response"

**–ü—Ä–∏—á–∏–Ω–∞:** GoToSocial –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `custom_metadata` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

**–†–µ—à–µ–Ω–∏–µ:**  
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ö–æ–¥ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:

```typescript
ticker: status.custom_metadata?.ticker,  // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø —Å ?.
```

–ü–æ—Å—Ç—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è, –ø—Ä–æ—Å—Ç–æ –±–µ–∑ –±–µ–π–¥–∂–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

- [ ] GoToSocial –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω (`curl http://localhost:8080/api/v1/instance`)
- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω —Å `VITE_API_URL=http://localhost:8080`
- [ ] Dev server –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `.env` (`npm run dev`)
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ GoToSocial (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω (–µ—ÅÔøΩÔøΩ—å —Ç–æ–∫–µ–Ω –≤ localStorage)
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/feedtest` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ë–ï–ó GoToSocial

–í—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –º–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI:

```typescript
// –í FeedTest.tsx –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ useGTSTimeline –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MOCK_POSTS

import { MOCK_POSTS } from '@/features/feed/mocks';

// const { statuses, ... } = useGTSTimeline(...);

// –í—Ä–µ–º–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤:
const statuses = MOCK_POSTS;
const isLoading = false;
const error = null;
const loadMore = async () => {};
const refresh = async () => {};
const newCount = 0;
const loadNew = () => {};
```

**–ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏!**

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ `/feedtest` –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ infinite scroll
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ auto-refresh
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (profile, notifications)
5. –î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ GoToSocial –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–£–¥–∞—á–∏!** üöÄ
