# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Railway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–í—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–µ—Ä–≤–∏—Å—É **Postgres** –≤–º–µ—Å—Ç–æ **custom-backend**, –ø–æ—ç—Ç–æ–º—É —Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å DATABASE_URL.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1: –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ custom-backend –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd custom-backend
railway link

# –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞:
# > custom-backend  (–ù–ï Postgres!)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
railway status
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: Service: custom-backend

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
cd ..
./apply-migrations-production-fixed.sh
```

### –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ custom-backend, –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î:

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç TT PROD1
# 3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å Postgres
# 4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É "Connect"
# 5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DATABASE_URL

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é:
cd custom-backend
export DATABASE_URL="postgresql://..."  # –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é:
psql "$DATABASE_URL" < internal/database/migrations/007_add_widgets_and_admin.sql
psql "$DATABASE_URL" < internal/database/migrations/008_add_extended_user_fields.sql
```

### –°–ø–æ—Å–æ–± 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

–Ø —É–∂–µ –æ–±–Ω–æ–≤–∏–ª —Å–∫—Ä–∏–ø—Ç `apply-migrations-production-fixed.sh` - –æ–Ω —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–∏—Å
- ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ custom-backend
- ‚úÖ –ü—Ä–æ–±—É–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è DATABASE_URL

## üìù –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å:**
   ```bash
   cd custom-backend
   railway link
   # –í—ã–±–µ—Ä–∏—Ç–µ: custom-backend
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   cd ..
   ./apply-migrations-production-fixed.sh
   ```

3. **–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** (–°–ø–æ—Å–æ–± 2)

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è 007 –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è 008 –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- üìä –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ –ë–î

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `custom-backend` –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `railway link`
- –í—ã–±–∏—Ä–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å **custom-backend**, –∞ –Ω–µ **Postgres**
- DATABASE_URL –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è custom-backend —Å–µ—Ä–≤–∏—Å–∞

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard –∏ –≤—Ä—É—á–Ω—É—é —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ DATABASE_URL –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ Postgres, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –°–ø–æ—Å–æ–± 2.
