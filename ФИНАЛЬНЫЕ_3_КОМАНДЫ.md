# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ï 3 –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ó–ê–í–ï–†–®–ï–ù–ò–Ø –ù–ê–°–¢–†–û–ô–ö–ò

–í—ã —É–∂–µ –ø–æ—á—Ç–∏ —É —Ü–µ–ª–∏! –û—Å—Ç–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å 3 –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (—Å–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –°–ï–ô–ß–ê–°):

### 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DATABASE_URL

–ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ **Postgres ‚Üí Variables** –Ω–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **DATABASE_URL**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚ãÆ —Å–ø—Ä–∞–≤–∞ –æ—Ç DATABASE_URL
- –í—ã–±–µ—Ä–∏—Ç–µ "Copy Value" –∏–ª–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ"
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ü–û–õ–ù–û–°–¢–¨–Æ (–±—É–¥–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `postgresql://postgres:–ø–∞—Ä–æ–ª—å@—Ö–æ—Å—Ç:5432/railway`)

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≠–¢–ò 3 –ö–û–ú–ê–ù–î–´:

### –ö–æ–º–∞–Ω–¥–∞ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î

```bash
psql "–í–ê–®_DATABASE_URL_–ó–î–ï–°–¨" -f custom-backend/internal/database/migrations/007_add_widgets_and_admin.sql
```

**–ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_DATABASE_URL_–ó–î–ï–°–¨` –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DATABASE_URL!**

–ü—Ä–∏–º–µ—Ä:
```bash
psql "postgresql://postgres:abc123@containers-us-west-123.railway.app:5432/railway" -f custom-backend/internal/database/migrations/007_add_widgets_and_admin.sql
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
CREATE TABLE
CREATE INDEX
CREATE TABLE
...
```

–ï—Å–ª–∏ —É–≤–∏–¥–µ–ª–∏ "CREATE TABLE" –∏–ª–∏ "ALTER TABLE" - –∑–Ω–∞—á–∏—Ç —É—Å–ø–µ—à–Ω–æ! ‚úÖ

---

### –ö–æ–º–∞–Ω–¥–∞ 2: –ù–∞–π—Ç–∏ —Å–≤–æ–π email –≤ –ë–î

```bash
psql "–í–ê–®_DATABASE_URL_–ó–î–ï–°–¨" -c "SELECT id, username, email, role FROM users LIMIT 10;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
–¢–∞–±–ª–∏—Ü–∞ —Å –≤–∞—à–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–π email –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ!

---

### –ö–æ–º–∞–Ω–¥–∞ 3: –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–µ–±—è –∞–¥–º–∏–Ω–æ–º

```bash
psql "–í–ê–®_DATABASE_URL_–ó–î–ï–°–¨" -c "UPDATE users SET role = 'admin' WHERE email = '–í–ê–®_EMAIL@example.com';"
```

**–ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_EMAIL@example.com` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π email –∏–∑ –∫–æ–º–∞–Ω–¥—ã 2!**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
UPDATE 1
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "UPDATE 1" - –≤—ã —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω! üéâ

---

## ‚ùì –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

### –û—à–∏–±–∫–∞: "psql: command not found"

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL:**

**–ù–∞ Mac:**
```bash
brew install postgresql
```

**–ù–∞ Ubuntu/Debian:**
```bash
sudo apt-get install postgresql-client
```

**–ù–∞ Windows:**
- –°–∫–∞—á–∞–π—Ç–µ PostgreSQL —Å https://www.postgresql.org/download/windows/
- –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ "Command Line Tools"

---

### –û—à–∏–±–∫–∞: "could not connect to server"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DATABASE_URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Å–æ –≤—Å–µ–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏)
2. DATABASE_URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `postgresql://`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

---

### –û—à–∏–±–∫–∞: "relation users does not exist"

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç –≤—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –Ω–µ –∫ —Ç–æ–π –ë–î. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —Å–∫—Ä–∏–Ω—à–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –≠—Ç–æ —Ç–æ—á–Ω–æ –±–∞–∑–∞ **Postgres** (–∞ –Ω–µ Redis)?
- DATABASE_URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –±–∞–∑—ã?

---

## ‚úÖ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ news —Å–æ–∑–¥–∞–Ω–∞:
psql "–í–ê–®_DATABASE_URL" -c "SELECT COUNT(*) FROM news;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—ã –∞–¥–º–∏–Ω:
psql "–í–ê–®_DATABASE_URL" -c "SELECT username, email, role FROM users WHERE role = 'admin';"
```

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–π email —Å role = admin!**

---

## üéâ –ì–æ—Ç–æ–≤–æ! –ß—Ç–æ –¥–∞–ª—å—à–µ:

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã** –ø–æ–∫–∞ Railway –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ GitHub
   (–ü–æ–º–Ω–∏—Ç–µ, –º—ã —É–∂–µ –∑–∞–ø—É—à–∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥!)

2. **–ü–µ—Ä–µ–∑–∞–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ:**
   - –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –í–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞
   - JWT —Ç–æ–∫–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å —Ä–æ–ª—å—é admin

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   ```
   https://x-18-production.netlify.app/admin
   ```
   
   –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å! üéä

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ç–æ:**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–æ—Å—Ç —Å —Ñ–æ—Ç–æ
   - –§–æ—Ç–æ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å URL: `https://x-18-production-38ec.up.railway.app/storage/media/...`
   - –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫!

---

## üìù –†–µ–∑—é–º–µ –∫–æ–º–∞–Ω–¥ (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë —Å—Ä–∞–∑—É):

```bash
# 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (–∑–∞–º–µ–Ω–∏—Ç–µ DATABASE_URL!)
psql "–í–ê–®–ï_DATABASE_URL" -f custom-backend/internal/database/migrations/007_add_widgets_and_admin.sql

# 2. –ù–∞–π—Ç–∏ —Å–≤–æ–π email
psql "–í–ê–®–ï_DATABASE_URL" -c "SELECT id, username, email, role FROM users LIMIT 10;"

# 3. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–µ–±—è –∞–¥–º–∏–Ω–æ–º (–∑–∞–º–µ–Ω–∏—Ç–µ EMAIL!)
psql "–í–ê–®–ï_DATABASE_URL" -c "UPDATE users SET role = 'admin' WHERE email = '–í–ê–®_EMAIL';"

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
psql "–í–ê–®–ï_DATABASE_URL" -c "SELECT username, email, role FROM users WHERE role = 'admin';"
```

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2 –º–∏–Ω—É—Ç—ã** ‚è±Ô∏è  
**–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π production —Å–∞–π—Ç!** üöÄ
