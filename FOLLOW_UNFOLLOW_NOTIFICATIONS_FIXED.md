# Исправление уведомлений о подписках и отписках

## Проблема
Пользователь видел уведомления о подписках (follow), но не видел уведомления об отписках (unfollow).

## Причина
Backend создавал уведомления только при подписке, но не создавал их при отписке.

## Решение

### Backend изменения
**Файл: `custom-backend/internal/api/users.go`**

Добавлено создание уведомления в функцию `UnfollowUser`:

```go
// Create notification for unfollow
notification := models.Notification{
    ID:         uuid.New(),
    UserID:     targetUserID,
    Type:       "unfollow",
    FromUserID: &currentUserID,
    Read:       false,
    CreatedAt:  time.Now(),
}

h.db.DB.Create(&notification)
```

### Frontend изменения
**Файл: `client/pages/SocialNotifications.tsx`**

Добавлена обработка типа "unfollow":

```typescript
case "unfollow":
  uiType = "follow";
  message = "отписался от ваших обновлений";
  break;
```

## Результат

✅ **Подписка (follow)**: "подписался на ваши обновления"  
✅ **Отписка (unfollow)**: "отписался от ваших обновлений"

Оба типа уведомлений теперь корректно:
- Создаются в backend при соответствующих действиях
- Сохраняются в базу данных
- Отправляются через API
- Отображаются в интерфейсе с правильными сообщениями

## Тестирование

1. Откройте приложение и залогиньтесь под двумя разными пользователями
2. Первым пользователем подпишитесь на второго
3. Проверьте уведомления второго пользователя → увидите "подписался на ваши обновления"
4. Первым пользователем отпишитесь от второго
5. Проверьте уведомления второго пользователя → увидите "отписался от ваших обновлений"

## Важно
После изменений необходимо перезапустить backend:
```bash
pkill -9 -f "custom-backend"
lsof -ti :8080 | xargs kill -9 2>/dev/null
cd custom-backend && go run cmd/server/main.go &
```

---
*Дата: 27.10.2025*  
*Статус: ✅ РЕШЕНО*
