# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞ –∏ –æ–±–ª–æ–∂–∫–∏

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **401 Unauthorized –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ social.tyriantrade.com**

**–õ–æ–≥–∏:**
```
[Error] Failed to load resource: the server responded with a status of 401 () (upload, line 0)
[Error] [useImageUpload] Failed to upload avatar: Error: Upload failed with status 401
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ–¥–¥–æ–º–µ–Ω `social.tyriantrade.com` –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
- XMLHttpRequest –≤ `useImageUpload` –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç cookies —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `xhr.withCredentials = true`

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í client/hooks/useImageUpload.ts
xhr.open('POST', `${baseUrl}/api/media/upload`);
xhr.withCredentials = true; // ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£
if (token) {
  xhr.setRequestHeader('Authorization', `Bearer ${token}`);
}
```

### 2. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç undefined –¥–ª—è avatar_url/header_url**

**–õ–æ–≥–∏:**
```
üì∏ RAW avatar_url: ‚Äì undefined
üñºÔ∏è RAW header_url: ‚Äì undefined
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ü–£–°–¢–´–ï –∑–Ω–∞—á–µ–Ω–∏—è
- –ò–∑-–∑–∞ 401 –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- –ü–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 401 –æ—à–∏–±–∫–∏, –∑–∞–≥—Ä—É–∑–∫–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑—É.

### 3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏**

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ `/profile` (ProfileNew) - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Redux
- ‚ùå `/profile-page` (OtherProfilePage) - –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ 401

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 401:**
- `useCustomUserProfile` –±—É–¥–µ—Ç refetch –¥–∞–Ω–Ω—ã–µ –∏–∑ API –∫–æ–≥–¥–∞ AuthContext –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –°–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –ø—Ä–∏–¥—É—Ç –≤ ProfileHero
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤—è—Ç—Å—è

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å useImageUpload - –¥–æ–±–∞–≤–∏—Ç—å withCredentials
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ /profile-page
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ (401 –æ—à–∏–±–∫–∞)
- ‚è≥ –û–∂–∏–¥–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è withCredentials
- ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
