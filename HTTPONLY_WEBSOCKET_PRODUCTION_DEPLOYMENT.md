# HttpOnly Cookies & WebSocket - Production Deployment

## –î–∞—Ç–∞ –¥–µ–ø–ª–æ—è: 29.10.2025, 20:44

## –°—Ç–∞—Ç—É—Å: üöÄ –ó–ê–î–ï–ü–õ–û–ï–ù–û –í PRODUCTION

### –ß—Ç–æ –±—ã–ª–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ:

#### 1. HttpOnly Cookies (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚úÖ Refresh token —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ HttpOnly cookie
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ UUID –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ rate limiter

#### 2. WebSocket (Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è WebSocket
- ‚úÖ Redis pub/sub –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Auto-reconnect —Å exponential backoff
- ‚úÖ Heartbeat –º–µ—Ö–∞–Ω–∏–∑–º

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:

```
‚úÖ –ö–æ–º–º–∏—Ç: 1440b253
‚úÖ Push –Ω–∞ GitHub: —É—Å–ø–µ—à–Ω–æ
üîÑ Railway Backend: –¥–µ–ø–ª–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
üîÑ Netlify Frontend: –¥–µ–ø–ª–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**Production URLs:**
- Frontend: https://your-netlify-domain.netlify.app
- Backend API: https://your-railway-domain.railway.app
- WebSocket: wss://your-railway-domain.railway.app/ws/notifications

### –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ production:

#### 1. HttpOnly Cookies
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É Application ‚Üí Cookies
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ refresh_token:
   - –ò–º–µ–µ—Ç —Ñ–ª–∞–≥ HttpOnly ‚úì
   - –ò–º–µ–µ—Ç —Ñ–ª–∞–≥ Secure ‚úì (—Ç–æ–ª—å–∫–æ –Ω–∞ HTTPS)
   - –ò–º–µ–µ—Ç SameSite: Lax ‚úì

#### 2. WebSocket
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Network
2. –§–∏–ª—å—Ç—Ä WS (WebSocket)
3. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
4. –î–æ–ª–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
5. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ª–∞–π–∫, –ø–æ–¥–ø–∏—Å–∫–∞) –æ–Ω–∏ –ø—Ä–∏–¥—É—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
document.cookie
// refresh_token –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] refresh_token –≤ HttpOnly cookie
- [ ] WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- [ ] Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Auto-reconnect –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

**Railway (Backend):**
```bash
# –õ–æ–≥–∏ –¥–µ–ø–ª–æ—è
https://railway.app/project/YOUR_PROJECT/service/YOUR_SERVICE

# WebSocket –ª–æ–≥–∏
tail -f logs | grep -i websocket
```

**Netlify (Frontend):**
```bash
# –õ–æ–≥–∏ –¥–µ–ø–ª–æ—è
https://app.netlify.com/sites/YOUR_SITE/deploys
```

### –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:

- Railway: ~2-3 –º–∏–Ω—É—Ç—ã
- Netlify: ~1-2 –º–∏–Ω—É—Ç—ã

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏: ~5 –º–∏–Ω—É—Ç**

### –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```bash
# Railway
railway rollback

# Netlify
netlify rollback
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. `custom-backend/pkg/middleware/ratelimiter.go` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ UUID –∫–æ–Ω–≤–µ—Ä—Å–∏—è
2. `HTTPONLY_COOKIES_WEBSOCKET_VERIFICATION_REPORT.md` - –û—Ç—á—ë—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ
3. `UI_IMPROVEMENTS_DEPLOYMENT_REPORT.md` - –û—Ç—á—ë—Ç –æ UI —É–ª—É—á—à–µ–Ω–∏—è—Ö

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è (~5 –º–∏–Ω—É—Ç)
2. üîç –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å HttpOnly Cookies –≤ production
3. üîç –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å WebSocket –≤ production
4. üìù –°–æ–æ–±—â–∏—Ç—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω!

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞:
- Railway: https://railway.app
- Netlify: https://app.netlify.com
